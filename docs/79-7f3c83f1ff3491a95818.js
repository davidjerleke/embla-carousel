"use strict";(self.webpackChunkembla_carousel_docs=self.webpackChunkembla_carousel_docs||[]).push([[79],{40079:function(e,n,l){l.r(n),n.default="import {\n  EmblaCarouselType,\n  EmblaEventListType,\n  EmblaEventModelType\n} from 'embla-carousel'\n\nconst TWEEN_FACTOR_BASE = 0.2\nlet tweenFactor = 0\nlet tweenNodes: HTMLElement[] = []\n\nconst setTweenNodes = (emblaApi: EmblaCarouselType): void => {\n  tweenNodes = emblaApi.slideNodes().map((slideNode) => {\n    return slideNode.querySelector('.embla__parallax__layer') as HTMLElement\n  })\n}\n\nconst setTweenFactor = (emblaApi: EmblaCarouselType): void => {\n  tweenFactor = TWEEN_FACTOR_BASE * emblaApi.snapList().length\n}\n\nconst tweenParallax = <EventType extends keyof EmblaEventListType>(\n  emblaApi: EmblaCarouselType,\n  event?: EmblaEventModelType<EventType>\n): void => {\n  const engine = emblaApi.internalEngine()\n  const scrollProgress = emblaApi.scrollProgress()\n  const slidesInView = emblaApi.slidesInView()\n  const isScrollEvent = event?.type === 'scroll'\n\n  emblaApi.snapList().forEach((scrollSnap, snapIndex) => {\n    let diffToTarget = scrollSnap - scrollProgress\n    const slidesInSnap = engine.scrollSnapList.slidesBySnap[snapIndex]\n\n    slidesInSnap.forEach((slideIndex) => {\n      if (isScrollEvent && !slidesInView.includes(slideIndex)) return\n\n      if (engine.options.loop) {\n        engine.slideLooper.loopPoints.forEach((loopItem) => {\n          const target = loopItem.target()\n\n          if (slideIndex === loopItem.index && target !== 0) {\n            const sign = Math.sign(target)\n\n            if (sign === -1) {\n              diffToTarget = scrollSnap - (1 + scrollProgress)\n            }\n            if (sign === 1) {\n              diffToTarget = scrollSnap + (1 - scrollProgress)\n            }\n          }\n        })\n      }\n\n      const translate = diffToTarget * (-1 * tweenFactor) * 100\n      const tweenNode = tweenNodes[slideIndex]\n      tweenNode.style.transform = `translateX(${translate}%)`\n    })\n  })\n}\n\nexport const setupTweenParallax = (emblaApi: EmblaCarouselType): void => {\n  setTweenNodes(emblaApi)\n  setTweenFactor(emblaApi)\n  tweenParallax(emblaApi)\n\n  emblaApi\n    .on('reinit', setTweenNodes)\n    .on('reinit', setTweenFactor)\n    .on('reinit', tweenParallax)\n    .on('scroll', tweenParallax)\n    .on('slidefocus', tweenParallax)\n}\n"}}]);
//# sourceMappingURL=79-7f3c83f1ff3491a95818.js.map