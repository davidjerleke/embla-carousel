{"version":3,"file":"6036-2b952c343cc9f13d906c.js","mappings":"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","sources":["webpack://embla-carousel-docs/./src/components/Examples/Predefined/Miscellaneous/IosPickerLoop.tsx","webpack://embla-carousel-docs/./src/components/Sandbox/React/SandboxFilesSrc/Predefined/IosPicker/EmblaCarouselIosPickerItem.tsx","webpack://embla-carousel-docs/./src/components/Sandbox/React/SandboxFilesSrc/Predefined/IosPicker/EmblaCarousel.tsx"],"sourcesContent":["import { EmblaOptionsType } from 'embla-carousel'\nimport { SandboxStaticSettingsType } from 'consts/sandbox'\nimport { sandboxStaticSandboxes } from 'components/Sandbox/sandboxStatic'\nimport { styledComponentsStylesToString } from 'utils/styledComponentStylesToString'\nimport { ExamplesSetupType } from 'consts/examples'\nimport CarouselIosPicker from 'components/Sandbox/React/SandboxFilesSrc/Predefined/IosPicker/EmblaCarousel'\nimport { IOS_PICKER_STYLES } from 'components/Examples/examplesCarouselStyles'\n\nconst ID = 'embla-carousel-ios-style-picker-loop'\nconst OPTIONS: EmblaOptionsType = { loop: true }\nconst STYLES = styledComponentsStylesToString(IOS_PICKER_STYLES)\nconst CONFIG: SandboxStaticSettingsType = {\n  id: ID,\n  slides: [],\n  options: OPTIONS,\n  styles: STYLES\n}\nconst SANDBOXES = sandboxStaticSandboxes(CONFIG, 'Predefined/IosPicker')\n\nexport const EXAMPLE: ExamplesSetupType = {\n  Carousel: CarouselIosPicker as ExamplesSetupType['Carousel'],\n  config: CONFIG,\n  sandboxes: SANDBOXES\n}\n","import React, { useEffect, useState, useCallback, useRef } from 'react'\nimport { EmblaCarouselType } from 'embla-carousel'\nimport useEmblaCarousel from 'embla-carousel-react'\n\nconst CIRCLE_DEGREES = 360\nconst WHEEL_ITEM_SIZE = 32\nconst WHEEL_ITEM_COUNT = 18\nconst WHEEL_ITEMS_IN_VIEW = 4\n\nexport const WHEEL_ITEM_RADIUS = CIRCLE_DEGREES / WHEEL_ITEM_COUNT\nexport const IN_VIEW_DEGREES = WHEEL_ITEM_RADIUS * WHEEL_ITEMS_IN_VIEW\nexport const WHEEL_RADIUS = Math.round(\n  WHEEL_ITEM_SIZE / 2 / Math.tan(Math.PI / WHEEL_ITEM_COUNT)\n)\n\nconst isInView = (wheelLocation: number, slidePosition: number): boolean =>\n  Math.abs(wheelLocation - slidePosition) < IN_VIEW_DEGREES\n\nconst setSlideStyles = (\n  emblaApi: EmblaCarouselType,\n  index: number,\n  loop: boolean,\n  slideCount: number,\n  totalRadius: number\n): void => {\n  const slideNode = emblaApi.slideNodes()[index]\n  const wheelLocation = emblaApi.scrollProgress() * totalRadius\n  const positionDefault = emblaApi.snapList()[index] * totalRadius\n  const positionLoopStart = positionDefault + totalRadius\n  const positionLoopEnd = positionDefault - totalRadius\n\n  let inView = false\n  let angle = index * -WHEEL_ITEM_RADIUS\n\n  if (isInView(wheelLocation, positionDefault)) {\n    inView = true\n  }\n\n  if (loop && isInView(wheelLocation, positionLoopEnd)) {\n    inView = true\n    angle = -CIRCLE_DEGREES + (slideCount - index) * WHEEL_ITEM_RADIUS\n  }\n\n  if (loop && isInView(wheelLocation, positionLoopStart)) {\n    inView = true\n    angle = -(totalRadius % CIRCLE_DEGREES) - index * WHEEL_ITEM_RADIUS\n  }\n\n  if (inView) {\n    slideNode.style.opacity = '1'\n    slideNode.style.transform = `translateY(-${\n      index * 100\n    }%) rotateX(${angle}deg) translateZ(${WHEEL_RADIUS}px)`\n  } else {\n    slideNode.style.opacity = '0'\n    slideNode.style.transform = 'none'\n  }\n}\n\nexport const setContainerStyles = (\n  emblaApi: EmblaCarouselType,\n  wheelRotation: number\n): void => {\n  emblaApi.containerNode().style.transform = `translateZ(${WHEEL_RADIUS}px) rotateX(${wheelRotation}deg)`\n}\n\ntype PropType = {\n  loop?: boolean\n  label: string\n  slideCount: number\n  perspective: 'left' | 'right'\n}\n\nexport const IosPickerItem = (props: PropType) => {\n  const { slideCount, perspective, label, loop = false } = props\n  const [emblaRef, emblaApi] = useEmblaCarousel({\n    loop,\n    axis: 'y',\n    dragFree: true,\n    containScroll: false,\n    slideChanges: false\n  })\n  const rootNodeRef = useRef<HTMLDivElement>(null)\n  const totalRadius = slideCount * WHEEL_ITEM_RADIUS\n  const rotationOffset = loop ? 0 : WHEEL_ITEM_RADIUS\n  const slides = Array.from(Array(slideCount).keys())\n\n  const inactivateEmblaTransform = useCallback(\n    (emblaApi: EmblaCarouselType) => {\n      if (!emblaApi) return\n\n      const { translate, slideTranslates } = emblaApi.internalEngine()\n      const translates = [translate, ...slideTranslates]\n\n      translates.forEach((translate) => {\n        translate.clear()\n        translate.toggleActive(false)\n      })\n    },\n    []\n  )\n\n  const rotateWheel = useCallback(\n    (emblaApi: EmblaCarouselType) => {\n      const rotation = slideCount * WHEEL_ITEM_RADIUS - rotationOffset\n      const wheelRotation = rotation * emblaApi.scrollProgress()\n      setContainerStyles(emblaApi, wheelRotation)\n      emblaApi.slideNodes().forEach((_, index) => {\n        setSlideStyles(emblaApi, index, loop, slideCount, totalRadius)\n      })\n    },\n    [slideCount, rotationOffset, totalRadius]\n  )\n\n  useEffect(() => {\n    if (!emblaApi) return\n\n    emblaApi.on('pointerup', (emblaApi) => {\n      const { scrollTo, target, location } = emblaApi.internalEngine()\n      const displacement = target.minus(location)\n      const factor = Math.abs(displacement) < WHEEL_ITEM_SIZE / 2.5 ? 10 : 0.1\n      const distance = displacement * factor\n      scrollTo.distance(distance, true)\n    })\n\n    emblaApi.on('scroll', rotateWheel)\n\n    emblaApi.on('reinit', (emblaApi) => {\n      inactivateEmblaTransform(emblaApi)\n      rotateWheel(emblaApi)\n    })\n\n    inactivateEmblaTransform(emblaApi)\n    rotateWheel(emblaApi)\n  }, [emblaApi, inactivateEmblaTransform, rotateWheel])\n\n  return (\n    <div className=\"embla__ios-picker\">\n      <div className=\"embla__ios-picker__scene\" ref={rootNodeRef}>\n        <div\n          className={`embla__ios-picker__viewport embla__ios-picker__viewport--perspective-${perspective}`}\n          ref={emblaRef}\n        >\n          <div className=\"embla__ios-picker__container\">\n            {slides.map((_, index) => (\n              <div className=\"embla__ios-picker__slide\" key={index}>\n                {index}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n      <div className=\"embla__ios-picker__label\">{label}</div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { EmblaOptionsType } from 'embla-carousel'\nimport { IosPickerItem } from './EmblaCarouselIosPickerItem'\n\ntype PropType = {\n  options: EmblaOptionsType\n}\n\nconst EmblaCarousel = (props: PropType) => {\n  const { loop } = props.options\n\n  return (\n    <div className=\"embla\">\n      <IosPickerItem\n        slideCount={24}\n        perspective=\"left\"\n        loop={loop}\n        label=\"hours\"\n      />\n      <IosPickerItem\n        slideCount={60}\n        perspective=\"right\"\n        loop={loop}\n        label=\"min\"\n      />\n    </div>\n  )\n}\n\nexport default EmblaCarousel\n"],"names":["CONFIG","id","slides","options","loop","styles","styledComponentsStylesToString","IOS_PICKER_STYLES","SANDBOXES","sandboxStaticSandboxes","EXAMPLE","Carousel","CarouselIosPicker","config","sandboxes","WHEEL_ITEM_RADIUS","CIRCLE_DEGREES","WHEEL_RADIUS","Math","round","WHEEL_ITEM_SIZE","tan","PI","isInView","wheelLocation","slidePosition","abs","IosPickerItem","props","slideCount","perspective","label","emblaRef","emblaApi","useEmblaCarousel","axis","dragFree","containScroll","slideChanges","rootNodeRef","useRef","totalRadius","rotationOffset","Array","from","keys","inactivateEmblaTransform","useCallback","translate","slideTranslates","internalEngine","concat","_toConsumableArray","forEach","clear","toggleActive","rotateWheel","wheelRotation","scrollProgress","setContainerStyles","containerNode","style","transform","slideNodes","_","index","setSlideStyles","slideNode","positionDefault","snapList","positionLoopStart","positionLoopEnd","inView","angle","opacity","useEffect","on","scrollTo","target","location","displacement","minus","distance","React","className","ref","map","key"],"sourceRoot":""}